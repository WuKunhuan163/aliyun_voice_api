# é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ« Web åº”ç”¨

ä¸€ä¸ªåŸºäºé˜¿é‡Œäº‘æ™ºèƒ½è¯­éŸ³äº¤äº’APIçš„Webè¯­éŸ³è¯†åˆ«åº”ç”¨ï¼Œæ”¯æŒå®æ—¶å½•éŸ³ã€è¯­éŸ³è¯†åˆ«å’Œæ™ºèƒ½åˆ†æã€‚

ğŸŒ **åœ¨çº¿ä½“éªŒ**: [https://250903-aliyun-voice.vercel.app](https://250903-aliyun-voice.vercel.app)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¤ **å®æ—¶å½•éŸ³**: ä½¿ç”¨Web Audio APIè¿›è¡Œé«˜è´¨é‡éŸ³é¢‘å½•åˆ¶ï¼Œæ”¯æŒ30ç§’è‡ªåŠ¨åœæ­¢
- ğŸ”Š **è¯­éŸ³è¯†åˆ«**: é›†æˆé˜¿é‡Œäº‘æ™ºèƒ½è¯­éŸ³äº¤äº’APIï¼Œé«˜ç²¾åº¦ä¸­æ–‡è¯†åˆ«
- ğŸ¤– **æ™ºèƒ½åˆ†æ**: ä½¿ç”¨æ™ºè°±AI GLM-4.5-Flashå¯¹è¯†åˆ«ç»“æœè¿›è¡Œæ™ºèƒ½æ€»ç»“
- ğŸ“Š **å®æ—¶æ³¢å½¢**: SVGå®æ—¶éŸ³é¢‘æ³¢å½¢å¯è§†åŒ–ï¼Œå½•éŸ³è¿›åº¦æ¡æ˜¾ç¤º
- ğŸ’¾ **é…ç½®ç®¡ç†**: æ”¯æŒé…ç½®å¯¼å…¥å¯¼å‡ºï¼ŒsessionStorageæŒä¹…åŒ–å­˜å‚¨
- ğŸš€ **æ™ºèƒ½è·³è½¬**: åŸºäºé…ç½®å®ŒæˆçŠ¶æ€çš„è‡ªåŠ¨æ­¥éª¤è·³è½¬ç³»ç»Ÿ
- ğŸ¯ **æ­¥éª¤å‘å¯¼**: 6æ­¥é…ç½®å‘å¯¼ï¼Œæ¸…æ™°çš„ç”¨æˆ·å¼•å¯¼æµç¨‹
- ğŸ“± **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨ç«¯è®¾å¤‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åœ¨çº¿ä½¿ç”¨

ç›´æ¥è®¿é—® [https://250903-aliyun-voice.vercel.app](https://250903-aliyun-voice.vercel.app)ï¼ŒæŒ‰ç…§æ­¥éª¤é…ç½®APIå¯†é’¥å³å¯ä½¿ç”¨ã€‚

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/WuKunhuan163/aliyun_voice_to_text.git
   cd aliyun_voice_to_text
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼‰**
   ```bash
   npm run dev
   ```

4. **å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**
   ```bash
   npm start
   ```

## ğŸ”§ é…ç½®è¦æ±‚

### å¿…éœ€é…ç½®

1. **é˜¿é‡Œäº‘æ™ºèƒ½è¯­éŸ³äº¤äº’**
   - å‰å¾€ [é˜¿é‡Œäº‘æ™ºèƒ½è¯­éŸ³äº¤äº’æ§åˆ¶å°](https://nls-portal.console.aliyun.com/)
   - å¼€é€šæœåŠ¡å¹¶åˆ›å»ºé¡¹ç›®è·å– AppKey
   - åˆ›å»ºç”¨æˆ·å¹¶è·å– AccessKey ID å’Œ AccessKey Secret

2. **æ™ºè°±AI** (å¯é€‰ï¼Œç”¨äºæ™ºèƒ½åˆ†æ)
   - å‰å¾€ [æ™ºè°±AIå¼€æ”¾å¹³å°](https://bigmodel.cn/)
   - è·å–API Key
   - æ³¨æ„ï¼šæ™ºè°±AIåŠŸèƒ½ç°åœ¨é€šè¿‡ç‹¬ç«‹çš„ [zhipu_llm_api](https://zhipu-llm-api.vercel.app) æœåŠ¡æä¾›

### é…ç½®æ­¥éª¤

åº”ç”¨æä¾›å®Œæ•´çš„6æ­¥é…ç½®å‘å¯¼ï¼š

1. **æœåŠ¡å¼€é€šç¡®è®¤** - ç¡®è®¤é˜¿é‡Œäº‘æœåŠ¡å·²å¼€é€š
2. **AppKeyé…ç½®** - è¾“å…¥é¡¹ç›®AppKey
3. **ç”¨æˆ·åˆ›å»ºç¡®è®¤** - ç¡®è®¤å·²åˆ›å»ºè¯­éŸ³äº¤äº’ç”¨æˆ·
4. **AccessKeyé…ç½®** - è¾“å…¥å¹¶éªŒè¯AccessKeyå‡­æ®
5. **å½•éŸ³æµ‹è¯•** - æµ‹è¯•è¯­éŸ³å½•åˆ¶å’Œè¯†åˆ«åŠŸèƒ½
6. **æ™ºè°±AIé…ç½®** - é…ç½®AIåˆ†æåŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **HTML5/CSS3**: ç°ä»£Webæ ‡å‡†ï¼Œå“åº”å¼è®¾è®¡
- **Vanilla JavaScript (ES6+)**: æ¨¡å—åŒ–æ¶æ„ï¼Œæ— å¤–éƒ¨æ¡†æ¶ä¾èµ–
- **Web Audio API**: é«˜è´¨é‡éŸ³é¢‘å½•åˆ¶å’Œå®æ—¶å¤„ç†
- **AudioWorkletNode**: éŸ³é¢‘æ•°æ®æµå¤„ç†
- **SVG**: å®æ—¶æ³¢å½¢å¯è§†åŒ–
- **SessionStorage**: é…ç½®æŒä¹…åŒ–å­˜å‚¨

### åç«¯æŠ€æœ¯æ ˆ
- **Node.js**: æœåŠ¡å™¨è¿è¡Œæ—¶
- **Expressé£æ ¼è·¯ç”±**: RESTful APIè®¾è®¡
- **é˜¿é‡Œäº‘NLS SDK**: è¯­éŸ³è¯†åˆ«æœåŠ¡é›†æˆ
- **Vercel Serverless**: äº‘å‡½æ•°éƒ¨ç½²

### APIæœåŠ¡æ¶æ„
- **é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«**: ç›´æ¥é›†æˆé˜¿é‡Œäº‘NLS API
- **æ™ºè°±AIæœåŠ¡**: é€šè¿‡ç‹¬ç«‹çš„ [zhipu_llm_api](https://zhipu-llm-api.vercel.app) å¾®æœåŠ¡
  - è§£è€¦æ™ºè°±AIåŠŸèƒ½ï¼Œç‹¬ç«‹éƒ¨ç½²å’Œç»´æŠ¤
  - ç»Ÿä¸€çš„APIæ¥å£ï¼Œä¾¿äºå…¶ä»–é¡¹ç›®å¤ç”¨
  - æ”¯æŒGLM-4-Flashç­‰å¤šç§æ¨¡å‹

### æ ¸å¿ƒæ¨¡å—

```
assets/scripts/
â”œâ”€â”€ app.js              # ä¸»åº”ç”¨é€»è¾‘ï¼Œåè°ƒå„æ¨¡å—
â”œâ”€â”€ audio-recorder.js   # éŸ³é¢‘å½•åˆ¶æ¨¡å—ï¼ŒWeb Audio APIå°è£…
â”œâ”€â”€ config-manager.js   # é…ç½®ç®¡ç†ï¼ŒæŒä¹…åŒ–å­˜å‚¨
â”œâ”€â”€ ui-manager.js       # UIçŠ¶æ€ç®¡ç†ï¼Œæ­¥éª¤æ§åˆ¶
â”œâ”€â”€ aliyun-api.js       # é˜¿é‡Œäº‘APIå°è£…
â””â”€â”€ server.js          # æœ¬åœ°å¼€å‘æœåŠ¡å™¨
```

## ğŸ’¡ ç¼–ç¨‹ç»éªŒä¸æŠ€æœ¯äº®ç‚¹

### 1. æ¨¡å—åŒ–æ¶æ„è®¾è®¡

é‡‡ç”¨ES6ç±»å’Œæ¨¡å—åŒ–è®¾è®¡ï¼Œå®ç°äº†é«˜å†…èšä½è€¦åˆï¼š

```javascript
class VoiceRecognitionApp {
    constructor() {
        this.stepAutoJumpManager = this.createStepAutoJumpManager();
    }
    
    createStepAutoJumpManager() {
        return {
            stepConfigs: { /* æ­¥éª¤é…ç½® */ },
            async autoJumpFromStep(startStep) { /* è‡ªåŠ¨è·³è½¬é€»è¾‘ */ }
        };
    }
}
```

### 2. Web Audio API æ·±åº¦åº”ç”¨

å®ç°äº†ä¸“ä¸šçº§éŸ³é¢‘å½•åˆ¶å’Œå®æ—¶å¯è§†åŒ–ï¼š

```javascript
// ä½¿ç”¨AudioWorkletNodeè¿›è¡ŒéŸ³é¢‘å¤„ç†
const audioWorkletNode = new AudioWorkletNode(audioContext, 'audio-processor');
audioWorkletNode.port.onmessage = (event) => {
    const { audioData, rms } = event.data;
    this.updateWaveform(rms); // å®æ—¶æ³¢å½¢æ›´æ–°
};
```

### 3. æ™ºèƒ½çŠ¶æ€ç®¡ç†

åŸºäºçŠ¶æ€æœºçš„æ­¥éª¤ç®¡ç†ç³»ç»Ÿï¼š

```javascript
stepConfigs: {
    2: {
        name: 'AppKeyé…ç½®',
        hasJumpButton: true,
        jumpFunction: () => this.validateStep2(),
        canAutoJump: () => {
            const hasConfig = config.appKey && config.appKey.trim();
            const wasCompleted = configManager.isStepCompleted(2);
            return hasConfig && wasCompleted;
        }
    }
}
```

### 4. å¼‚æ­¥æ“ä½œä¼˜åŒ–

ä½¿ç”¨Promiseå’Œasync/awaitå¤„ç†å¤æ‚å¼‚æ­¥æµç¨‹ï¼š

```javascript
async executeStepJump(stepNumber) {
    try {
        await stepConfig.jumpFunction();
        return true;
    } catch (error) {
        console.error(`æ­¥éª¤${stepNumber}è·³è½¬å¤±è´¥:`, error);
        return false;
    }
}
```

### 5. é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ

å®ç°äº†å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆæœºåˆ¶ï¼š

```javascript
try {
    const result = await this.performSpeechRecognition(audioBlob);
    if (result) {
        this.handleRecognitionSuccess(result);
    }
} catch (error) {
    this.handleRecognitionError(error);
    uiManager.showStepStatus('step5', `âŒ ${error.message}`, 'error');
}
```

### 6. æ€§èƒ½ä¼˜åŒ–æŠ€å·§

- **äº‹ä»¶å§”æ‰˜**: å‡å°‘äº‹ä»¶ç›‘å¬å™¨æ•°é‡
- **é˜²æŠ–å¤„ç†**: é¿å…é¢‘ç¹çš„APIè°ƒç”¨
- **å†…å­˜ç®¡ç†**: åŠæ—¶é‡Šæ”¾éŸ³é¢‘èµ„æº
- **æ‡’åŠ è½½**: æŒ‰éœ€åˆå§‹åŒ–é‡å‹ç»„ä»¶

### 7. è·¨å¹³å°å…¼å®¹æ€§

å®ç°äº†å¤šå¹³å°çš„è‡ªåŠ¨æµè§ˆå™¨æ‰“å¼€åŠŸèƒ½ï¼š

```javascript
const platform = process.platform;
let command;
switch (platform) {
    case 'darwin': command = `open ${url}`; break;
    case 'win32': command = `start ${url}`; break;
    default: command = `xdg-open ${url}`; break;
}
```

## ğŸ¯ ä½¿ç”¨æŠ€å·§

### å½•éŸ³ä¼˜åŒ–
- ç¡®ä¿å®‰é™ç¯å¢ƒï¼Œå‡å°‘èƒŒæ™¯å™ªéŸ³
- è·ç¦»éº¦å…‹é£15-30cmï¼Œæ¸…æ™°å‘éŸ³
- å½•éŸ³æ—¶é•¿å»ºè®®10-25ç§’ï¼Œè·å¾—æœ€ä½³è¯†åˆ«æ•ˆæœ

### é…ç½®ç®¡ç†
- ä½¿ç”¨å¯¼å‡ºåŠŸèƒ½å¤‡ä»½é…ç½®
- é…ç½®å¯¼å…¥åä¼šè‡ªåŠ¨è·³è½¬åˆ°åˆé€‚æ­¥éª¤
- sessionStorageç¡®ä¿é¡µé¢åˆ·æ–°åé…ç½®ä¸ä¸¢å¤±

### æ™ºèƒ½åˆ†æ
- æ™ºè°±AIä¼šè‡ªåŠ¨æ€»ç»“å½•éŸ³å†…å®¹
- æ”¯æŒ50å­—ä»¥å†…çš„ç®€æ´æ€»ç»“
- å¯ç”¨äºä¼šè®®è®°å½•ã€è¯­éŸ³å¤‡å¿˜ç­‰åœºæ™¯

## ğŸ”’ å®‰å…¨è¯´æ˜

- **éšç§ä¿æŠ¤**: æ‰€æœ‰APIå¯†é’¥ä»…åœ¨å‰ç«¯ä¸´æ—¶å­˜å‚¨ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨
- **æ•°æ®å®‰å…¨**: éŸ³é¢‘æ•°æ®ä»…ç”¨äºè¯†åˆ«ï¼Œä¸è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨
- **ä¼šè¯ç®¡ç†**: ä½¿ç”¨sessionStorageï¼Œå…³é—­æµè§ˆå™¨è‡ªåŠ¨æ¸…é™¤æ•æ„Ÿä¿¡æ¯

## ğŸ“ˆ é¡¹ç›®ç»Ÿè®¡

- **ä»£ç è¡Œæ•°**: ~2000+ è¡Œ
- **æ¨¡å—æ•°é‡**: 6ä¸ªæ ¸å¿ƒæ¨¡å—
- **APIé›†æˆ**: 2ä¸ªç¬¬ä¸‰æ–¹æœåŠ¡
- **æµè§ˆå™¨å…¼å®¹**: Chrome 66+, Firefox 60+, Safari 12+

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ”— ç›¸å…³é“¾æ¥

- [é˜¿é‡Œäº‘æ™ºèƒ½è¯­éŸ³äº¤äº’](https://ai.aliyun.com/nls)
- [æ™ºè°±AIå¼€æ”¾å¹³å°](https://bigmodel.cn/)
- [Web Audio API æ–‡æ¡£](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)
- [Vercel éƒ¨ç½²æ–‡æ¡£](https://vercel.com/docs)